{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\code\\\\personal-finance-chatbot-full\\\\frontend\\\\src\\\\pages\\\\Chatbot.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport Layout from '../components/Layout/Layout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chatbot = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    type: 'bot',\n    text: 'Xin ch√†o! T√¥i l√† tr·ª£ l√Ω t√†i ch√≠nh th√¥ng minh ü§ñ. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ghi nh·∫≠n thu/chi, t∆∞ v·∫•n ng√¢n s√°ch, ho·∫∑c tr·∫£ l·ªùi c√¢u h·ªèi t√†i ch√≠nh.'\n  }, {\n    type: 'user',\n    text: 'T√¥i nh·∫≠n l∆∞∆°ng 10 tri·ªáu'\n  }, {\n    type: 'bot',\n    text: 'Ghi nh·∫≠n thu 10 tri·ªáu v√†o danh m·ª•c: L∆∞∆°ng?'\n  }]);\n  const [input, setInput] = useState('');\n  const messageEndRef = useRef(null);\n  useEffect(() => {\n    var _messageEndRef$curren;\n    (_messageEndRef$curren = messageEndRef.current) === null || _messageEndRef$curren === void 0 ? void 0 : _messageEndRef$curren.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const handleSend = async () => {\n    if (!input.trim()) return;\n    const userMessage = input;\n    setMessages([...messages, {\n      type: 'user',\n      text: userMessage\n    }]);\n    setInput('');\n    try {\n      var _data$bot_response;\n      const token = sessionStorage.getItem(\"token\");\n      const response = await fetch('http://127.0.0.1:8000/chat/interact', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'accept': 'application/json',\n          'Authorization': `Bearer ${token}` // ho·∫∑c `${token}` n·∫øu backend kh√¥ng y√™u c·∫ßu Bearer\n        },\n        body: JSON.stringify({\n          session_id: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n          message: userMessage,\n          session_name: 'string'\n        })\n      });\n      const data = await response.json();\n\n      // C·∫≠p nh·∫≠t tin nh·∫Øn bot t·ª´ API\n      if ((_data$bot_response = data.bot_response) !== null && _data$bot_response !== void 0 && _data$bot_response.content) {\n        setMessages(prev => [...prev, {\n          type: 'bot',\n          text: data.bot_response.content\n        }]);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages(prev => [...prev, {\n        type: 'bot',\n        text: 'C√≥ l·ªói x·∫£y ra khi g·ª≠i tin nh·∫Øn. Vui l√≤ng th·ª≠ l·∫°i.'\n      }]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-[#121212] text-white p-6 space-y-6 flex w-full h-dvh overflow-hidden tailwind-scrollbar-hide\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col h-full max-h-dvh\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto py-4 px-6 space-y-4 flex flex-col w-full mx-auto overflow-x-hidden\",\n          children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `px-4 py-2 rounded-xl text-sm whitespace-pre-wrap w-fit max-w-[80%] ${msg.type === 'bot' ? 'bg-gray-100 text-gray-800 self-start text-left' : 'bg-blue-600 text-white self-end text-right'}`,\n            children: msg.text\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messageEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-t-gray-700 p-4 flex items-center sticky bottom-0 z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Nh\\u1EADp tin nh\\u1EAFn...\",\n            className: \"flex-1 border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-black\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            onKeyDown: e => e.key === 'Enter' && handleSend()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSend,\n            className: \"ml-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\n            children: \"\\u27A4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(Chatbot, \"9P+aHdbVd/211paX4CgL/ItD4tU=\");\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["useState","useEffect","useRef","Layout","jsxDEV","_jsxDEV","Chatbot","_s","messages","setMessages","type","text","input","setInput","messageEndRef","_messageEndRef$curren","current","scrollIntoView","behavior","handleSend","trim","userMessage","_data$bot_response","token","sessionStorage","getItem","response","fetch","method","headers","body","JSON","stringify","session_id","message","session_name","data","json","bot_response","content","prev","error","console","children","className","map","msg","i","fileName","_jsxFileName","lineNumber","columnNumber","ref","placeholder","value","onChange","e","target","onKeyDown","key","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/code/personal-finance-chatbot-full/frontend/src/pages/Chatbot.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport Layout from '../components/Layout/Layout';\n\nconst Chatbot = () => {\n  const [messages, setMessages] = useState([\n    { type: 'bot', text: 'Xin ch√†o! T√¥i l√† tr·ª£ l√Ω t√†i ch√≠nh th√¥ng minh ü§ñ. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ghi nh·∫≠n thu/chi, t∆∞ v·∫•n ng√¢n s√°ch, ho·∫∑c tr·∫£ l·ªùi c√¢u h·ªèi t√†i ch√≠nh.' },\n    { type: 'user', text: 'T√¥i nh·∫≠n l∆∞∆°ng 10 tri·ªáu' },\n    { type: 'bot', text: 'Ghi nh·∫≠n thu 10 tri·ªáu v√†o danh m·ª•c: L∆∞∆°ng?' },\n  ]);\n  const [input, setInput] = useState('');\n  const messageEndRef = useRef(null);\n\n  useEffect(() => {\n    messageEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = input;\n    setMessages([...messages, { type: 'user', text: userMessage }]);\n    setInput('');\n\n    try {\n      const token = sessionStorage.getItem(\"token\");\n      const response = await fetch('http://127.0.0.1:8000/chat/interact', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'accept': 'application/json',\n          'Authorization': `Bearer ${token}` // ho·∫∑c `${token}` n·∫øu backend kh√¥ng y√™u c·∫ßu Bearer\n        },\n        body: JSON.stringify({\n          session_id: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n          message: userMessage,\n          session_name: 'string'\n        })\n      });\n\n      const data = await response.json();\n\n      // C·∫≠p nh·∫≠t tin nh·∫Øn bot t·ª´ API\n      if (data.bot_response?.content) {\n        setMessages((prev) => [\n          ...prev,\n          { type: 'bot', text: data.bot_response.content }\n        ]);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages((prev) => [\n        ...prev,\n        { type: 'bot', text: 'C√≥ l·ªói x·∫£y ra khi g·ª≠i tin nh·∫Øn. Vui l√≤ng th·ª≠ l·∫°i.' }\n      ]);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"min-h-screen bg-[#121212] text-white p-6 space-y-6 flex w-full h-dvh overflow-hidden tailwind-scrollbar-hide\">\n        <div className=\"flex-1 flex flex-col h-full max-h-dvh\">\n          {/* Khu v·ª±c tin nh·∫Øn */}\n          <div className=\"flex-1 overflow-y-auto py-4 px-6 space-y-4 flex flex-col w-full mx-auto overflow-x-hidden\">\n            {messages.map((msg, i) => (\n              <div\n                key={i}\n                className={`px-4 py-2 rounded-xl text-sm whitespace-pre-wrap w-fit max-w-[80%] ${msg.type === 'bot'\n                  ? 'bg-gray-100 text-gray-800 self-start text-left'\n                  : 'bg-blue-600 text-white self-end text-right'\n                  }`}\n              >\n                {msg.text}\n              </div>\n            ))}\n            <div ref={messageEndRef} />\n          </div>\n\n          {/* Input nh·∫≠p tin nh·∫Øn */}\n          <div className=\"border-t border-t-gray-700 p-4 flex items-center sticky bottom-0 z-10\">\n            <input\n              type=\"text\"\n              placeholder=\"Nh·∫≠p tin nh·∫Øn...\"\n              className=\"flex-1 border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-black\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n            />\n            <button\n              onClick={handleSend}\n              className=\"ml-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n            >\n              ‚û§\n            </button>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Chatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}